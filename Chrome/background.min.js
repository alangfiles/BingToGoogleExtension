chrome.commands.onCommand.addListener(googIt);
chrome.browserAction.onClicked.addListener(googIt)

function googIt(){
    chrome.tabs.getSelected(null,function(tab) {
        var tablink = tab.url;
        
        var vars = [], hash;
        var hashes = tablink.slice(tablink.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
          hash = hashes[i].split('=');
          vars.push(hash[0]);
          vars[hash[0]] = hash[1];
        }

        var query = vars['q'];
        if(query != undefined){
            window.open("https://www.google.com/?#q="+query.replace("+"," "));
        }
    });
}