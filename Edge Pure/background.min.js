browser.browserAction.onClicked.addListener(function(tab) {
  // disable the active tab
  chrome.browserAction.disable(tab.id);
  // requires the "tabs" or "activeTab" permission
  alert('y');
  console.log(tab.url);
});

// chrome.windows.getCurrent.onkeyup = function(e){
//     alert('1');
//     console.log('alan');
//     var pressed = "";
//     if(e.shiftKey && e.altKey && e.keyCode == 71){
//         console.log('bingit');
//         //bingIt();
//     }
// }

function bingIt(){
    chrom.tabs.getCurrent(null,function(tab) {
        var tablink = tab.url;
        
        var vars = [], hash;
        var hashes = tablink.slice(tablink.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
          hash = hashes[i].split('=');
          vars.push(hash[0]);
          vars[hash[0]] = hash[1];
        }

        var query = vars['q'];
        if(query != undefined){
            browser.windows.create("https://www.google.com/?#q="+query.replace("+"," "));
        }
    });
}